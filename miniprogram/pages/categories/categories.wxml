<!-- 分类页面 -->
<view class="container">
  <!-- 固定顶部区域 -->
  <view class="fixed-header">
    <!-- 搜索栏 -->
    <view class="search-section">
      <view class="search-bar">
        <icon type="search" size="16" color="#999"></icon>
        <input placeholder="搜索分类或帖子" bindinput="onSearchInput" />
      </view>
    </view>

    <!-- 分类横向滑动区域 -->
    <view class="category-scroll-section">
      <scroll-view class="category-scroll" scroll-x="true" show-scrollbar="false">
        <view 
          class="category-item {{currentCategory.id === item.id ? 'active' : ''}}" 
          wx:for="{{categories}}" 
          wx:key="id" 
          bindtap="selectCategory" 
          data-category="{{item}}"
        >
          <view class="category-icon" style="background: {{item.color}}">
            <text class="iconfont {{item.icon}}"></text>
          </view>
          <text class="category-name">{{item.name}}</text>
        </view>
      </scroll-view>
    </view>
  </view>

  <!-- 帖子列表区域 -->
  <view class="posts-section">
    <view class="section-header">
      <text class="section-title">{{currentCategory.name || '全部'}}的帖子</text>
      <text class="post-count">{{posts.length}}条信息</text>
    </view>
    
    <view class="post-list">
      <view 
        class="post-item" 
        wx:for="{{posts}}" 
        wx:key="id" 
        bindtap="goToPost" 
        data-post="{{item}}"
      >
        <view class="post-header">
          <image class="avatar" src="{{item.author.avatar}}" />
          <view class="post-info">
            <text class="author-name">{{item.author.name}}</text>
            <text class="post-time">{{item.time}}</text>
          </view>
          <text class="post-category">{{item.category}}</text>
        </view>
        <view class="post-content">
          <text class="post-title">{{item.title}}</text>
          <text class="post-desc">{{item.desc}}</text>
        </view>
        <view class="post-footer">
          <view class="post-stats">
            <view class="stat-item">
              <icon type="eye" size="12" />
              <text>{{item.stats.views}}</text>
            </view>
            <view class="stat-item">
              <icon type="like" size="12" />
              <text>{{item.stats.likes}}</text>
            </view>
            <view class="stat-item">
              <icon type="comment" size="12" />
              <text>{{item.stats.comments}}</text>
            </view>
          </view>
          <text class="post-price">{{item.price}}</text>
        </view>
      </view>
    </view>
    
    <!-- 空状态 -->
    <view class="empty-state" wx:if="{{posts.length === 0}}">
      <text class="empty-icon">📝</text>
      <text class="empty-title">暂无帖子</text>
      <text class="empty-desc">该分类下还没有帖子，快来发布第一个吧！</text>
    </view>
  </view>
</view>

<!-- 悬浮发布按钮 -->
<view class="float-publish" bindtap="goToPublish">
  <icon type="plus" size="24" color="#fff"></icon>
</view> 