<!-- 帖子详情页面 -->
<view class="container">
  <!-- 帖子内容卡片 -->
  <view class="post-card">
    <!-- 作者信息 -->
    <view class="author-section">
      <image class="avatar" src="{{post.author.avatar}}" />
      <view class="author-info">
        <text class="author-name">{{post.author.name}}</text>
        <text class="post-time">{{post.time}}</text>
      </view>
      <view class="author-actions">
        <button class="follow-btn" bindtap="followAuthor" wx:if="{{!post.author.isFollowed}}">关注</button>
        <button class="followed-btn" bindtap="unfollowAuthor" wx:else>已关注</button>
      </view>
    </view>

    <!-- 帖子标题 -->
    <view class="post-title">
      <text>{{post.title}}</text>
    </view>

    <!-- 帖子描述 -->
    <view class="post-desc">
      <text>{{post.desc}}</text>
    </view>

    <!-- 帖子图片 -->
    <view class="post-images" wx:if="{{post.images && post.images.length > 0}}">
      <image 
        wx:for="{{post.images}}" 
        wx:key="index" 
        src="{{item}}" 
        class="post-image"
        bindtap="previewImage"
        data-url="{{item}}"
        data-urls="{{post.images}}"
      />
    </view>

    <!-- 帖子标签 -->
    <view class="post-tags" wx:if="{{post.tags && post.tags.length > 0}}">
      <text 
        wx:for="{{post.tags}}" 
        wx:key="index" 
        class="tag-item"
      >{{item}}</text>
    </view>

    <!-- 价格信息 -->
    <view class="price-section" wx:if="{{post.price}}">
      <text class="price-label">价格：</text>
      <text class="price-value">{{post.price}}</text>
    </view>

    <!-- 位置信息 -->
    <view class="location-section" wx:if="{{post.location}}">
      <icon type="location" size="16" color="#27ae60" />
      <text class="location-text">{{post.location}}</text>
    </view>

    <!-- 统计信息 -->
    <view class="stats-section">
      <view class="stat-item">
        <icon type="eye" size="16" color="#27ae60" />
        <text class="stat-number">{{post.stats.views}}</text>
        <text class="stat-label">浏览</text>
      </view>
      <view class="stat-item">
        <icon type="like" size="16" color="{{post.isLiked ? '#27ae60' : '#bbb'}}" />
        <text class="stat-number">{{post.stats.likes}}</text>
        <text class="stat-label">点赞</text>
      </view>
      <view class="stat-item">
        <icon type="comment" size="16" color="#27ae60" />
        <text class="stat-number">{{post.stats.comments}}</text>
        <text class="stat-label">评论</text>
      </view>
      <view class="stat-item">
        <icon type="share" size="16" color="#27ae60" />
        <text class="stat-number">0</text>
        <text class="stat-label">分享</text>
      </view>
    </view>

    <!-- 交互按钮 -->
    <view class="action-bar">
      <view class="action-item {{post.isLiked ? 'liked' : ''}}" bindtap="toggleLike">
        <text class="action-icon">{{post.isLiked ? '❤️' : '🤍'}}</text>
      </view>
      <view class="action-item" bindtap="sharePost">
        <text class="action-icon">📤</text>
      </view>
      <view class="action-item" bindtap="reportPost">
        <text class="action-icon warning">⚠️</text>
      </view>
    </view>
  </view>

  <!-- 评论区卡片 -->
  <view class="comments-section">
    <view class="section-title">
      <text>评论 ({{comments.length}})</text>
    </view>
    
    <!-- 评论输入框 -->
    <view class="comment-input-section">
      <image class="comment-input-avatar" src="/images/avatar1.jpg" />
      <view class="comment-input-wrapper">
        <textarea 
          class="comment-textarea" 
          placeholder="写下你的评论..." 
          value="{{commentText}}"
          bindinput="onCommentInput"
          maxlength="200"
          auto-height="{{true}}"
        ></textarea>
        <view class="comment-input-footer">
          <text class="comment-count">{{commentText.length}}/200</text>
          <button class="submit-comment-btn" bindtap="submitComment" disabled="{{!commentText.trim()}}">发送</button>
        </view>
      </view>
    </view>
    
    <view class="comment-list">
      <view 
        wx:for="{{comments}}" 
        wx:key="id" 
        class="comment-item"
      >
        <image class="comment-avatar" src="{{item.author.avatar}}" />
        <view class="comment-content">
          <view class="comment-header">
            <text class="comment-author">{{item.author.name}}</text>
            <text class="comment-time">{{item.time}}</text>
          </view>
          <text class="comment-text">{{item.content}}</text>
          <view class="comment-actions">
            <text class="reply-btn" bindtap="replyComment" data-comment="{{item}}">回复</text>
            <text class="like-btn {{item.isLiked ? 'liked' : ''}}" bindtap="likeComment" data-id="{{item.id}}">
              {{item.isLiked ? '已赞' : '赞'}} ({{item.likes}})
            </text>
          </view>
        </view>
      </view>
    </view>
    <!-- 空状态 -->
    <view class="empty-comments-card" wx:if="{{comments.length === 0}}">
      <view class="empty-icon-main">💬</view>
      <view class="empty-title-main">暂无评论</view>
      <view class="empty-desc-main">快来发表第一条评论吧！</view>
    </view>
  </view>

  <!-- 相关推荐 -->
  <view class="related-section" wx:if="{{relatedPosts.length > 0}}">
    <view class="section-title">
      <text>相关推荐</text>
    </view>
    <view class="related-list">
      <view 
        wx:for="{{relatedPosts}}" 
        wx:key="id" 
        class="related-item"
        bindtap="goToPost"
        data-post="{{item}}"
      >
        <image class="related-image" src="{{item.cover}}" />
        <view class="related-info">
          <text class="related-title">{{item.title}}</text>
          <text class="related-price">{{item.price}}</text>
        </view>
      </view>
    </view>
  </view>
</view>

 