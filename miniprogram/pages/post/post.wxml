<!-- å¸–å­è¯¦æƒ…é¡µé¢ -->
<view class="container">
  <!-- å¸–å­å†…å®¹å¡ç‰‡ -->
  <view class="post-card">
    <!-- ä½œè€…ä¿¡æ¯ -->
    <view class="author-section">
      <image class="avatar" src="{{post.author.avatar}}" />
      <view class="author-info">
        <text class="author-name">{{post.author.name}}</text>
        <text class="post-time">{{post.time}}</text>
      </view>
      <view class="author-actions">
        <button class="follow-btn" bindtap="followAuthor" wx:if="{{!post.author.isFollowed}}">å…³æ³¨</button>
        <button class="followed-btn" bindtap="unfollowAuthor" wx:else>å·²å…³æ³¨</button>
      </view>
    </view>

    <!-- å¸–å­æ ‡é¢˜ -->
    <view class="post-title">
      <text>{{post.title}}</text>
    </view>

    <!-- å¸–å­æè¿° -->
    <view class="post-desc">
      <text>{{post.desc}}</text>
    </view>

    <!-- å¸–å­å›¾ç‰‡ -->
    <view class="post-images" wx:if="{{post.images && post.images.length > 0}}">
      <image 
        wx:for="{{post.images}}" 
        wx:key="index" 
        src="{{item}}" 
        class="post-image"
        bindtap="previewImage"
        data-url="{{item}}"
        data-urls="{{post.images}}"
      />
    </view>

    <!-- å¸–å­æ ‡ç­¾ -->
    <view class="post-tags" wx:if="{{post.tags && post.tags.length > 0}}">
      <text 
        wx:for="{{post.tags}}" 
        wx:key="index" 
        class="tag-item"
      >{{item}}</text>
    </view>

    <!-- ä»·æ ¼ä¿¡æ¯ -->
    <view class="price-section" wx:if="{{post.price}}">
      <text class="price-label">ä»·æ ¼ï¼š</text>
      <text class="price-value">{{post.price}}</text>
    </view>

    <!-- ä½ç½®ä¿¡æ¯ -->
    <view class="location-section" wx:if="{{post.location}}">
      <icon type="location" size="16" color="#27ae60" />
      <text class="location-text">{{post.location}}</text>
    </view>

    <!-- ç»Ÿè®¡ä¿¡æ¯ -->
    <view class="stats-section">
      <view class="stat-item">
        <icon type="eye" size="16" color="#27ae60" />
        <text class="stat-number">{{post.stats.views}}</text>
        <text class="stat-label">æµè§ˆ</text>
      </view>
      <view class="stat-item">
        <icon type="like" size="16" color="{{post.isLiked ? '#27ae60' : '#bbb'}}" />
        <text class="stat-number">{{post.stats.likes}}</text>
        <text class="stat-label">ç‚¹èµ</text>
      </view>
      <view class="stat-item">
        <icon type="comment" size="16" color="#27ae60" />
        <text class="stat-number">{{post.stats.comments}}</text>
        <text class="stat-label">è¯„è®º</text>
      </view>
      <view class="stat-item">
        <icon type="share" size="16" color="#27ae60" />
        <text class="stat-number">0</text>
        <text class="stat-label">åˆ†äº«</text>
      </view>
    </view>

    <!-- äº¤äº’æŒ‰é’® -->
    <view class="action-bar">
      <view class="action-item {{post.isLiked ? 'liked' : ''}}" bindtap="toggleLike">
        <text class="action-icon">{{post.isLiked ? 'â¤ï¸' : 'ğŸ¤'}}</text>
      </view>
      <view class="action-item" bindtap="sharePost">
        <text class="action-icon">ğŸ“¤</text>
      </view>
      <view class="action-item" bindtap="reportPost">
        <text class="action-icon warning">âš ï¸</text>
      </view>
    </view>
  </view>

  <!-- è¯„è®ºåŒºå¡ç‰‡ -->
  <view class="comments-section">
    <view class="section-title">
      <text>è¯„è®º ({{comments.length}})</text>
    </view>
    
    <!-- è¯„è®ºè¾“å…¥æ¡† -->
    <view class="comment-input-section">
      <image class="comment-input-avatar" src="/images/avatar1.jpg" />
      <view class="comment-input-wrapper">
        <textarea 
          class="comment-textarea" 
          placeholder="å†™ä¸‹ä½ çš„è¯„è®º..." 
          value="{{commentText}}"
          bindinput="onCommentInput"
          maxlength="200"
          auto-height="{{true}}"
        ></textarea>
        <view class="comment-input-footer">
          <text class="comment-count">{{commentText.length}}/200</text>
          <button class="submit-comment-btn" bindtap="submitComment" disabled="{{!commentText.trim()}}">å‘é€</button>
        </view>
      </view>
    </view>
    
    <view class="comment-list">
      <view 
        wx:for="{{comments}}" 
        wx:key="id" 
        class="comment-item"
      >
        <image class="comment-avatar" src="{{item.author.avatar}}" />
        <view class="comment-content">
          <view class="comment-header">
            <text class="comment-author">{{item.author.name}}</text>
            <text class="comment-time">{{item.time}}</text>
          </view>
          <text class="comment-text">{{item.content}}</text>
          <view class="comment-actions">
            <text class="reply-btn" bindtap="replyComment" data-comment="{{item}}">å›å¤</text>
            <text class="like-btn {{item.isLiked ? 'liked' : ''}}" bindtap="likeComment" data-id="{{item.id}}">
              {{item.isLiked ? 'å·²èµ' : 'èµ'}} ({{item.likes}})
            </text>
          </view>
        </view>
      </view>
    </view>
    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-comments-card" wx:if="{{comments.length === 0}}">
      <view class="empty-icon-main">ğŸ’¬</view>
      <view class="empty-title-main">æš‚æ— è¯„è®º</view>
      <view class="empty-desc-main">å¿«æ¥å‘è¡¨ç¬¬ä¸€æ¡è¯„è®ºå§ï¼</view>
    </view>
  </view>

  <!-- ç›¸å…³æ¨è -->
  <view class="related-section" wx:if="{{relatedPosts.length > 0}}">
    <view class="section-title">
      <text>ç›¸å…³æ¨è</text>
    </view>
    <view class="related-list">
      <view 
        wx:for="{{relatedPosts}}" 
        wx:key="id" 
        class="related-item"
        bindtap="goToPost"
        data-post="{{item}}"
      >
        <image class="related-image" src="{{item.cover}}" />
        <view class="related-info">
          <text class="related-title">{{item.title}}</text>
          <text class="related-price">{{item.price}}</text>
        </view>
      </view>
    </view>
  </view>
</view>

 